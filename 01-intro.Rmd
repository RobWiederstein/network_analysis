# Introduction {#intro}

```{r intro-libraries, include=F}
x <- c("magick", "igraph", "kableExtra", "knitr", "webshot")
sapply(x, library, character.only = T)
```

## Terms

"A network is not just a metaphor: it is a precise, mathematical construct of nodes (vertices, actors) N and edges (ties, relations) E that can be directed or undirected. We can include information
(attributes) on the nodes as well as the edges." [@jasneyIntroductionSocialNetwork2018]

```{r node-graph, echo=FALSE, out.width="50%", fig.align="center", fig.cap="A network consisting of nodes, N, and directed edges E."}
library(igraph)
g1 <- graph_from_literal(a-+b, a+-c, b-+c)
V(g1)$color <- 1
V(g1)$color[2] <- 2
E(g1)$color <- 8
E(g1)$color[2] <- 3
E(g1)$lty <- 1
E(g1)$lty[2] <- 2
plot(g1, 
     vertex.size = 100,
     vertex.label.cex = 3,
     edge.width = 3)


```

## Input formats

Building a network graph is challenging because of the number of potential input types. Users must first distinguish whether the input is an adjacency matrix, incidence matrix, or edge list.  Then, the user must know if the graph is directed or undirected, weighted or unweighted. 
[@holtzNetworkGraphD32020]

### Adjacency matrix

An adjacency matrix is a square matrix where the number of rows and columns are the same. `igraph` can read an adjacency matrix using the `graph_from_adjacency_matrix()` function.  The function also accepts a sparse matrix which is sometimes preferred to minimize file sizes and conserve system resources on large datasets.

```{r jasney-adjacency-matrix, echo=F, out.width="65%", fig.align="center", fig.cap="Nodes with adjacency matrix.  [@jasneyIntroductionSocialNetwork2018]"}

knitr::include_graphics('./imgs/jasney-adj-matrix.png')

```

```{r sample-sparse-matrix, echo=F}
library(Matrix)
my.m <- sample(x = c(0,1), size = 25, replace = T, prob = c(.5, .5))
my.m <- Matrix(my.m, nrow=5, ncol=5, byrow=FALSE, dimnames=NULL,
       sparse = TRUE, doDiag = TRUE, forceCheck = FALSE)
print(my.m)
   
```

```{r plot-sparse-matrix, echo=F, fig.align="center", fig.cap="Plot generated from sparse matrix." }
network <- igraph::graph_from_adjacency_matrix(my.m)
plot.igraph(network,
     vertex.size = 50,
     label.cex = 35)
```


### Incidence matrix

The rows and colunms of an incidence matrix do not have to be equal.  Its shape can be rectangular in addition to square. `igraph` can read an incidence matrix using the `graph_from_incidence_matrix()`.

```{r example-incidence-matrix, echo=F, fig.align="center", fig.cap="Incidency matrix."}
# data
set.seed(1)
data <- matrix(sample(0:2, 30, replace=TRUE), nrow=6)
colnames(data) <- letters[1:5]
rownames(data) <- LETTERS[1:6]
#
data %>%
        kbl(caption="Example incidency matrix.") %>%
        kable_styling("striped", "condensed", full_width = T) %>%
        column_spec(1, bold = T, border_right = T) %>%
        row_spec(0, bold = T)
```

```{r plot-incidence-matrix, echo = F, fig.align="center", fig.cap="Plot generated from incidency matrix.", out.width="90%"}
# create the network object
network <- graph_from_incidence_matrix(data)
par(mfrow=c(1,1), mar=c(1, 1, 1, 1))
plot(network, 
     vertex.size = 50,
     label.cex = 35)
```
</div>
</div>

### Edge list

An edge list has 2 columns. Each observation represents a connection between two things.  The two column names are alternatively named (1) an origin and a destination or (2)a source and target, depending on the package used.  The column names are often the key to a successful importation of the data.  `igraph` imports an edge list `graph_from_data_frame()` function.

```{r jasney-incidence-matrix, echo=F, out.width="65%", fig.align="center", fig.cap="Nodes with edge list.  [@jasneyIntroductionSocialNetwork2018]"}

knitr::include_graphics('./imgs/jasney-edge-table.png')

```






### Dataframe distinguished

## R packages

Three `R` packages are dedicated to network analysis and are available for download from CRAN:  `igraph`, `ggraph`, and `networkD3`.


You can write citations, too. For example, we are using the **bookdown** package [@R-bookdown] in this sample book, which was built on top of R Markdown and **knitr** [@xie2015].
